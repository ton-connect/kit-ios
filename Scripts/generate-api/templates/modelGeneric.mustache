{{!--
  Template for generic struct generation.

  Vendor extensions used:
  - x-generic-params: array of {name} for type parameters
  - x-generic-type-ref: string indicating a property uses a generic type parameter

  Generates Swift structs with generic type parameters and Codable conformance.
--}}
{{#nonPublicApi}}internal{{/nonPublicApi}}{{^nonPublicApi}}public{{/nonPublicApi}} struct {{{classname}}}<{{#vendorExtensions.x-generic-params}}{{{name}}}: Codable{{^-last}}, {{/-last}}{{/vendorExtensions.x-generic-params}}>: Codable {
{{#vars}}
{{#description}}
    /** {{{.}}} */
{{/description}}
{{#vendorExtensions.x-generic-type-ref}}
    public var {{{name}}}: {{{vendorExtensions.x-generic-type-ref}}}{{^required}}?{{/required}}
{{/vendorExtensions.x-generic-type-ref}}
{{^vendorExtensions.x-generic-type-ref}}
    public var {{{name}}}: {{{dataType}}}{{^required}}?{{/required}}
{{/vendorExtensions.x-generic-type-ref}}
{{/vars}}

    {{#nonPublicApi}}internal{{/nonPublicApi}}{{^nonPublicApi}}public{{/nonPublicApi}} init({{#vars}}{{{name}}}: {{#vendorExtensions.x-generic-type-ref}}{{{vendorExtensions.x-generic-type-ref}}}{{/vendorExtensions.x-generic-type-ref}}{{^vendorExtensions.x-generic-type-ref}}{{{dataType}}}{{/vendorExtensions.x-generic-type-ref}}{{^required}}? = nil{{/required}}{{^-last}}, {{/-last}}{{/vars}}) {
{{#vars}}
        self.{{{name}}} = {{{name}}}
{{/vars}}
    }

    {{#nonPublicApi}}internal{{/nonPublicApi}}{{^nonPublicApi}}public{{/nonPublicApi}} enum CodingKeys: String, CodingKey, CaseIterable {
{{#vars}}
        case {{{name}}}{{#vendorExtensions.x-codegen-escaped-property-name}} = "{{{baseName}}}"{{/vendorExtensions.x-codegen-escaped-property-name}}
{{/vars}}
    }

    // Encodable protocol methods

    {{#nonPublicApi}}internal{{/nonPublicApi}}{{^nonPublicApi}}public{{/nonPublicApi}} func encode(to encoder: Encoder) throws {
        var container = encoder.container(keyedBy: CodingKeys.self)
{{#vars}}
{{#required}}
        try container.encode({{{name}}}, forKey: .{{{name}}})
{{/required}}
{{^required}}
        try container.encodeIfPresent({{{name}}}, forKey: .{{{name}}})
{{/required}}
{{/vars}}
    }
}
